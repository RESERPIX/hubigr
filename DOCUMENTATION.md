# Hubigr - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞](#–æ–±–∑–æ—Ä-–ø—Ä–æ–µ–∫—Ç–∞)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
3. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
4. [API Reference](#api-reference)
5. [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
6. [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
7. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
8. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
9. [–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ](#—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ)
10. [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)

---

## üéØ –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

**Hubigr** - –≤–µ–±-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –∏–≥—Ä–æ–≤—ã—Ö –¥–∂–µ–º–æ–≤ (game jams). –ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–∞–∫ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å API Gateway.

### –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- ‚úÖ **1.1 –ê–∫–∫–∞—É–Ω—Ç—ã –∏ –¥–æ—Å—Ç—É–ø** - –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ **1.2 –ü—Ä–æ—Ñ–∏–ª–∏** - –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω  
- ‚è≥ **1.3 –ò–≥—Ä—ã –∏ –∑–∞–ø—É—Å–∫ –≤ –±—Ä–∞—É–∑–µ—Ä–µ** - –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è
- ‚è≥ **1.4 –ú–æ–¥—É–ª—å ¬´–ì–µ–π–º–¥–∂–µ–º¬ª** - –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è
- ‚è≥ **1.5 –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è
- ‚è≥ **1.6 –ê–¥–º–∏–Ω-–º–∏–Ω–∏–º—É–º** - –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Backend**: Go 1.21+
- **API Gateway**: KrakenD
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL 15
- **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: Redis 7
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: Docker & Docker Compose
- **Web Framework**: Fiber v2

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Frontend      ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   KrakenD       ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   Auth Service  ‚îÇ
‚îÇ   (React/Vue)   ‚îÇ    ‚îÇ   API Gateway   ‚îÇ    ‚îÇ   (Go + Fiber)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                ‚îÇ                       ‚îÇ
                                ‚îÇ                       ‚ñº
                                ‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                ‚îÇ              ‚îÇ   PostgreSQL    ‚îÇ
                                ‚îÇ              ‚îÇ   Database      ‚îÇ
                                ‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                ‚îÇ                       ‚îÇ
                                ‚ñº                       ‚ñº
                       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                       ‚îÇ     Redis       ‚îÇ    ‚îÇ   File Storage  ‚îÇ
                       ‚îÇ   (Rate Limit)  ‚îÇ    ‚îÇ   (Avatars)     ‚îÇ
                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
hubigr/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ auth/                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ auth —Å–µ—Ä–≤–∏—Å–∞
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ config/              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ domain/              # –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ email/               # Email —Å–µ—Ä–≤–∏—Å (SMTP/Mock)
‚îÇ   ‚îú‚îÄ‚îÄ http/                # HTTP handlers –∏ middleware
‚îÇ   ‚îú‚îÄ‚îÄ ratelimit/           # Rate limiting —Å Redis
‚îÇ   ‚îú‚îÄ‚îÄ security/            # JWT, bcrypt, —Ç–æ–∫–µ–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ store/               # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ upload/              # –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ validation/          # –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ krakend/                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API Gateway
‚îú‚îÄ‚îÄ migrations/              # SQL –º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ uploads/                 # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ docker-compose.yml       # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ Dockerfile.auth          # –û–±—Ä–∞–∑ auth —Å–µ—Ä–≤–∏—Å–∞
‚îî‚îÄ‚îÄ *.sh                     # –¢–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
```

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker 20.10+
- Docker Compose 2.0+
- Go 1.21+ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone <repository-url>
cd hubigr

# 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –¥–ª—è SMTP –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

# 3. –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up -d

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose ps

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ API
curl http://localhost:8000/api/v1/health
```

### –ü–æ—Ä—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤

- **8000** - KrakenD API Gateway (–æ—Å–Ω–æ–≤–Ω–æ–π –≤—Ö–æ–¥)
- **8080** - Auth Service (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)
- **5432** - PostgreSQL
- **6379** - Redis

---

## üì° API Reference

### –ë–∞–∑–æ–≤—ã–π URL
```
http://localhost:8000/api/v1
```

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

#### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
```http
POST /auth/signup
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "<your_password>",
  "confirm_password": "<your_password>", 
  "nick": "username",
  "agree_terms": true
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "message": "–ú—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ —Å—Å—ã–ª–∫—É –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –Ω–∞ email",
  "user_id": 1
}
```

#### –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
```http
POST /auth/login
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "<your_password>"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "user": {
    "id": 1,
    "email": "user@example.com",
    "nick": "username",
    "role": "participant",
    "email_verified": true
  },
  "token": "eyJhbGciOiJIUzI1NiIs..."
}
```

#### –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email
```http
POST /auth/verify-email?token=<verification_token>
```

#### –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è
```http
POST /auth/reset-password
Content-Type: application/json

{
  "email": "user@example.com"
}
```

```http
POST /auth/reset-password/confirm
Content-Type: application/json

{
  "token": "<reset_token>",
  "password": "<new_password>",
  "confirm_password": "<new_password>"
}
```

### –ü—Ä–æ—Ñ–∏–ª–∏ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
```http
GET /profile
Authorization: Bearer <jwt_token>
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
```http
PUT /profile
Authorization: Bearer <jwt_token>
Content-Type: application/json

{
  "nick": "newnick",
  "bio": "–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è",
  "links": [
    {"title": "GitHub", "url": "https://github.com/user"}
  ]
}
```

#### –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞
```http
POST /profile/avatar
Authorization: Bearer <jwt_token>
Content-Type: multipart/form-data

avatar: <image_file>
```

#### –°–ø–∏—Å–æ–∫ —Å–∞–±–º–∏—Ç–æ–≤
```http
GET /profile/submissions?page=1&limit=20
Authorization: Bearer <jwt_token>
```

### –ö–æ–¥—ã –æ—à–∏–±–æ–∫

- **400** - –ù–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- **401** - –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
- **403** - –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω
- **404** - –ù–µ –Ω–∞–π–¥–µ–Ω–æ
- **409** - –ö–æ–Ω—Ñ–ª–∏–∫—Ç (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)
- **422** - –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- **429** - –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤
- **500** - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ö–µ–º–∞ –ë–î

#### –¢–∞–±–ª–∏—Ü–∞ `users`
```sql
CREATE TABLE users (
    id BIGSERIAL PRIMARY KEY,
    email CITEXT UNIQUE NOT NULL,
    hash TEXT NOT NULL,
    role TEXT NOT NULL DEFAULT 'participant',
    nick TEXT NOT NULL,
    avatar TEXT,
    bio TEXT,
    links JSONB NOT NULL DEFAULT '[]',
    is_banned BOOLEAN NOT NULL DEFAULT false,
    email_verified BOOLEAN NOT NULL DEFAULT false,
    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    privacy_settings JSONB NOT NULL DEFAULT '{}'
);
```

#### –¢–∞–±–ª–∏—Ü–∞ `notification_settings`
```sql
CREATE TABLE notification_settings (
    user_id BIGINT PRIMARY KEY REFERENCES users(id),
    new_game BOOLEAN NOT NULL DEFAULT true,
    new_build BOOLEAN NOT NULL DEFAULT true,
    new_post BOOLEAN NOT NULL DEFAULT true,
    channels JSONB NOT NULL DEFAULT '{"in_app": true}'
);
```

#### –¢–æ–∫–µ–Ω—ã
- `email_verify_tokens` - —Ç–æ–∫–µ–Ω—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è email (TTL 1 —á–∞—Å)
- `password_reset_tokens` - —Ç–æ–∫–µ–Ω—ã —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è (TTL 1 —á–∞—Å)

### –ú–∏–≥—Ä–∞—Ü–∏–∏

–ú–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ PostgreSQL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏–∑ –ø–∞–ø–∫–∏ `/migrations/`.

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **JWT —Ç–æ–∫–µ–Ω—ã** —Å –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º HS256
- **–í—Ä–µ–º—è –∂–∏–∑–Ω–∏**: 24 —á–∞—Å–∞
- **–°–µ–∫—Ä–µ—Ç**: –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –ü–∞—Ä–æ–ª–∏
- **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: bcrypt —Å cost 12
- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**: 6-20 —Å–∏–º–≤–æ–ª–æ–≤, –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã, —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è

### Rate Limiting
- **5 –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞/–º–∏–Ω—É—Ç—É** –Ω–∞ IP
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**: Redis —Å TTL
- **Endpoints**: login, signup, reset-password

### –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
- **–ê–≤–∞—Ç–∞—Ä—ã**: —Ç–æ–ª—å–∫–æ JPEG/PNG, –¥–æ 2 –ú–ë
- **–ü—Ä–æ–≤–µ—Ä–∫–∞**: Content-Type –∏ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞

### CORS
```yaml
allow_origins: ["*"]
allow_methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
allow_headers: ["Origin", "Authorization", "Content-Type"]
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
PORT=8080
DATABASE_URL=postgres://user:pass@localhost:5432/hubigr?sslmode=disable
REDIS_URL=redis://localhost:6379
JWT_SECRET=your-super-secret-jwt-key

# Email –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (SMTP)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_FROM=noreply@hubigr.com

# –ë–∞–∑–æ–≤—ã–π URL –¥–ª—è —Å—Å—ã–ª–æ–∫
BASE_URL=https://hubigr.com
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –ö–æ–ø–∏—Ä—É–µ–º –ø—Ä–∏–º–µ—Ä
cp .env.example .env

# –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å SMTP –ø—É—Å—Ç—ã–º–∏
# –ë—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è Mock sender
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

```bash
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
JWT_SECRET=very-long-random-secret-key
SMTP_HOST=your-smtp-server
SMTP_USER=your-smtp-user
SMTP_PASS=your-smtp-password
BASE_URL=https://your-domain.com
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã

```bash
# Rate limiting
./test_ratelimit.sh

# Email verification
./test_email.sh

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
./test_reset_password.sh

# –°–ø–∏—Å–æ–∫ —Å–∞–±–º–∏—Ç–æ–≤
./test_submissions.sh

# –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞
./test_avatar.sh
```

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```bash
curl -X POST http://localhost:8000/api/v1/auth/signup \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "<your_password>",
    "confirm_password": "<your_password>",
    "nick": "testuser",
    "agree_terms": true
  }'
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ health endpoint
```bash
curl http://localhost:8000/api/v1/health
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤

```bash
# –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose logs -f

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å
docker-compose logs -f auth
docker-compose logs -f postgres
docker-compose logs -f redis
```

---

## üö¢ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Docker Production

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤
docker-compose build

# –ó–∞–ø—É—Å–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d
```

### Kubernetes (–ø—Ä–∏–º–µ—Ä)

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: hubigr-auth
spec:
  replicas: 3
  selector:
    matchLabels:
      app: hubigr-auth
  template:
    metadata:
      labels:
        app: hubigr-auth
    spec:
      containers:
      - name: auth
        image: hubigr/auth:latest
        ports:
        - containerPort: 8080
        env:
        - name: JWT_SECRET
          valueFrom:
            secretKeyRef:
              name: hubigr-secrets
              key: jwt-secret
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å:
- **Prometheus** –¥–ª—è –º–µ—Ç—Ä–∏–∫
- **Grafana** –¥–ª—è –¥–∞—à–±–æ—Ä–¥–æ–≤
- **Jaeger** –¥–ª—è —Ç—Ä–µ–π—Å–∏–Ω–≥–∞
- **ELK Stack** –¥–ª—è –ª–æ–≥–æ–≤

---

## üë®‚Äçüíª –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
go mod download

# –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ –ë–î –∏ Redis
docker-compose up -d postgres redis

# –ó–∞–ø—É—Å–∫ auth —Å–µ—Ä–≤–∏—Å–∞ –ª–æ–∫–∞–ª—å–Ω–æ
go run cmd/auth/main.go
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö endpoints

1. **–î–æ–±–∞–≤–∏—Ç—å handler** –≤ `internal/http/handlers.go`
2. **–î–æ–±–∞–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç** –≤ `internal/http/router.go`
3. **–û–±–Ω–æ–≤–∏—Ç—å KrakenD** –≤ `krakend/krakend.json`
4. **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã**

### –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

```bash
# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é
touch migrations/002_new_feature.sql

# –î–æ–±–∞–≤–∏—Ç—å –≤ docker-compose –¥–ª—è –∞–≤—Ç–æ–ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

```go
// –ü—Ä–∏–º–µ—Ä –Ω–æ–≤–æ–≥–æ handler
func (h *Handlers) NewEndpoint(c *fiber.Ctx) error {
    // 1. –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    var req SomeRequest
    if err := c.BodyParser(&req); err != nil {
        return c.Status(400).JSON(domain.NewError("bad_request", "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç"))
    }
    
    // 2. –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
    result, err := h.someRepo.DoSomething(c.Context(), req)
    if err != nil {
        return c.Status(500).JSON(domain.NewError("internal_error", "–û—à–∏–±–∫–∞"))
    }
    
    // 3. –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    return c.JSON(result)
}
```

### –°–æ–≥–ª–∞—à–µ–Ω–∏—è

- **–Ø–∑—ã–∫–∏**: Go –¥–ª—è backend, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
- **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: `gofmt`, `goimports`
- **–õ–∏–Ω—Ç–∏–Ω–≥**: `golangci-lint`
- **–¢–µ—Å—Ç—ã**: `*_test.go` —Ñ–∞–π–ª—ã
- **–ö–æ–º–º–∏—Ç—ã**: Conventional Commits

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**Q: –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î**
```
A: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω:
docker-compose ps postgres
```

**Q: Rate limiting –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**
```
A: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis:
docker-compose logs redis
```

**Q: Email –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è**
```
A: –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Mock sender.
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: docker-compose logs auth
```

### –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

```bash
# –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ auth —Å–µ—Ä–≤–∏—Å–∞
docker-compose logs -f auth

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
docker-compose exec postgres psql -U user -d hubigr

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis
docker-compose exec redis redis-cli
```

### –ö–æ–Ω—Ç–∞–∫—Ç—ã

- **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫**: [–í–∞—à–µ –∏–º—è]
- **Email**: [–≤–∞—à email]
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**: [—Å—Å—ã–ª–∫–∞ –Ω–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π]

---

*–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞: $(date)*