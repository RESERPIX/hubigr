# TTL Политики Токенов

## Конфигурация

### Переменные Окружения
```bash
# Access Token TTL (минуты, диапазон: 5-15)
ACCESS_TOKEN_TTL=15

# Refresh Token TTL (дни, диапазон: 7-30)  
REFRESH_TOKEN_TTL=7
```

### Валидация
- Access Token: 5-15 минут
- Refresh Token: 7-30 дней

## Рекомендации

### Продакшен
```bash
ACCESS_TOKEN_TTL=5    # Максимальная безопасность
REFRESH_TOKEN_TTL=7   # Минимальный риск
```

### Разработка
```bash
ACCESS_TOKEN_TTL=15   # Удобство разработки
REFRESH_TOKEN_TTL=30  # Меньше перелогинов
```

## Механизм Ротации

- При `/auth/refresh` старый токен отзывается
- Создается новый refresh token с полным TTL
- Logout/смена пароля отзывают все токены пользователя

## Безопасность

- Refresh токены хешируются bcrypt
- Access токены подписываются HMAC-SHA256
- Отслеживание устройств (User-Agent, IP)
- Автоматическая очистка через 30 дней после истечения